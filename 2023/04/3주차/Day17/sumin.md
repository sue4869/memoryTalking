# 04.17

## 🍒 자바 락 종류

1. **고유락(intrinsic lock)**
    - 자바의 모든 객체(인스턴스, 클래스)는 락을 가지고 있다. 모든 객체가 가지는 락 = 고유락
    - synchronized블록이 고유락을 사용해서 락을 다룬다.
    
2. **synchronized 락**
    - 한번에 하나의 Thread만 접근 가능
    
3. **Reentrant**
    - ReentrantLock 은 락 능력이나 메모리 측면에서 synchronized 블록과 동일한 형태로 동작 (상호 배제(mutual exclusion) 락)
        - 여러 쓰레드에서 동시에 실행이 가능하지만, 스레드간 공유 자원을 이용하지 않는 함수
        - 공유 변수를 이용하지 않기 때문에 각 스레드는 언제나 같은 호출 결과를 얻을 수 있다.
    - synchronized와의 차이점
        - 락을 확보할 때 타임아웃을 지정하거나 대기 상태에서 인터럽트에 잘 반응하고 공정성 여부를 지정할 수도 있다
        - ReentrantLock 을 사용하면 해당하는 블록의 실행이 끝나고 통제권이 해당 블록을 떠나는 순간 락을 자동으로 해제하지 않기 때문에 굉장히 위험한 코드가 될 가능성이 높다. → finally 블록에서 반드시 락을 해제해야 한다
            
            ![Untitled](https://user-images.githubusercontent.com/68679529/232357894-fa1ec44e-fd52-4e0e-ac23-c53054364768.png)
            
        
        - 스레드 덤프를 떠보면 어느 스레드의 어느 메소드에서 어느 락을 확보하고 있고,
        
              데드락에 걸린 스레드가 있는지, 어디에서 데드락에 걸렸는지도 표시된다.
        
        → 락이 등록할 수 있는 관리 및 모니터링 인터페이스 존재 (Java 6)
        
    - 고급 동기화 기법을 사용해야 하는 경우에 사용
        
        1) 락을 확보할 때 타임아웃을 지정해야 하는 경우.
        
        2) 폴링의 형태로 락을 확보하고자 하는 경우.
        
        3) 락을 확보하느라 대기 상태에 들어가 있을 때 인터럽트를 걸 수 있어야 하는 경우.
        
        4) 대기 상태 큐 처리 방법을 공정하게 해야 하는 경우
        
        5) 코드가 단일 블록의 형태를 넘어서는 경우
        
4. **읽기-쓰기 락(read-write lock)**
    - 읽기 작업은 여러개를 한꺼번에 처리할 수 있지만, 쓰기 작업은 혼자만 동작할 수 있는 구조의 동기화를 처리해주는 락
    - 멀티 CPU시스템에서 읽기 작업을 많고 쓰기 작업이 적은 데이터 구조에 ReadWriteLock을 사용하면 성능을 크게 높일 수 있다.
    - 읽기 작업만 처리하는 다수의 스레드는 동기화된 값을 얼마든지 동시에 읽어갈 수 있다.


    

## 🍒 String vs StringBuffer vs StringBuilder
    
   <img width="681" alt="스크린샷 2023-04-14 오후 5 11 05" src="https://user-images.githubusercontent.com/68679529/232358151-97bd97e5-9987-444a-985b-8309cd5b0a09.png">